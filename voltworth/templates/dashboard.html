{% extends "base.html" %}
{% block title %}Dashboard EV Market{% endblock %}

{% block content %}
<div class="card p-4">
    <h3 class="header">ðŸ“Š EV Market Intelligence</h3>

    <div id="chart_prices" style="height:400px;"></div>
    <div id="chart_battery" style="height:400px;"></div>
    <div id="chart_range" style="height:400px;"></div>
</div>
{% endblock %}

{% block extra_js %}
<script>
fetch("/api/market-data/")
    .then(response => response.json())
    .then(data => {

        Plotly.newPlot('chart_prices', [{
            x: data.country,
            y: data.price_avg,
            type: 'bar'
        }], {
            title: "ðŸ’¶ Precio medio por paÃ­s (â‚¬)"
        });

        Plotly.newPlot('chart_battery', [{
            x: data.battery_capacity,
            type: 'histogram'
        }], {
            title: "ðŸ”‹ DistribuciÃ³n baterÃ­a (kWh)"
        });

        Plotly.newPlot('chart_range', [{
            x: data.electric_range_km,
            type: 'histogram'
        }], {
            title: "ðŸš— DistribuciÃ³n autonomÃ­a (km)"
        });

    });
</script>
{% endblock %}
